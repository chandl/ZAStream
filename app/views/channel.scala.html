@(stream: String, isLoggedIn: Boolean, userInfo: User, key: String, views: Integer)


@main(stream, isLoggedIn, userInfo) {

        <link type="text/css" rel="stylesheet" href="/assets/stylesheets/Cstyles.css" />
        <link href="//vjs.zencdn.net/5.8/video-js.min.css" rel="stylesheet" />
        <script src="//vjs.zencdn.net/5.8/video.min.js"></script>
        <script src="/assets/javascripts/videojs-contrib-hls.min.js"></script>
        <script src="/assets/javascripts/videojs-brand.min.js"></script>



    <section class="bg-primary" id="one">
        <div class="container-fluid">
        @if(!Channel.isStreaming(key)){
            <div class="row">
                <div class="container-fluid">
                <h1 id="stream-title">@Channel.findChannel(User.findByUsername(stream)).getChannelTitle()</h1>
                </div>
            </div>
            <div class="row">

                @*Video Box*@
                <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12">
                    <video autoplay id="player" class="video-js vjs-big-play-centered" height="360" width="640" controls preload="auto">
                        <source src="/live/@key/index.m3u8" type='application/x-mpegURL' />
                    </video>

                    <div class="view-stats">
                        <p id="username">Channel: @stream</p>
                        <p id="total-views">Total Views: <span id="totalCount">@views</span></p>
                        <p id="current-views">Watching Now: <span id="viewCount">0</span></p>
                    </div>

                </div>

                @*Chat Box*@
                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                @if(isLoggedIn){
                    <section class="no-padding" >

                        <div id="wrapper">
                            <div id="chatbox">



                            </div>
                            <input name="usermsg" placeholder="Send a message" type="text" id="usermsg" size="63" />
                            <input name="submitmsg" type="submit" id="submitmsg" value="Send" />
                        </div>

                    </section>
                }
                </div>

            </div>
        }else{
            <div class="row">
                <div class="col-lg-6 col-lg-offset-3 col-md-8 col-md-offset-2 text-center">
                    <h2 id="sorry">Sorry, @stream is not streaming right now.</h2>
                </div>
            </div>
        }


        </div>
    </section>




    @if(!Channel.isStreaming(key)) {
        <script>
                var player = videojs('#player', {
                    fluid: true
                });
                player.brand({
                    image: "assets/images/minimized-logo1.png",
                    title: "ZAStream",
                    destination: "https://zastream.com",
                    destinationTarget: "_top"
                });
        </script>
    }

    <script src="@routes.ChannelController.webSocketChannel(stream)" type="text/javascript"></script>
    @if(isLoggedIn) {
        <script src="@routes.ChatController.webSocketChannelChat(stream, userInfo.userId)" type="text/javascript"></script>
    }

}